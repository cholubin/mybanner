<div id="feature_wrapper">
	<p1>로고</p1>
	<br>
</div>

<table class="board_table">
    <thead class="logo">
        <tr>
            <th class="board_thead" width="150px"><center>구분</center></th>
            <td class="board_thead" width="500px"><center>내용</center></td>
			<td class="board_thead" width="150px"><center><input type="button" class="save_all" value="로고 저장"></center></td>
        </tr>
    </thead>
 
    <tbody class="logo">
        <%
		@logos.each do |logo|
		%>
		<tr>
            <td class="board_tbody" width="150px"><%= logo.name %></td>
            <td class="board_tbody" width="500px"><input type="file" class="val" id="logo_<%= logo.id %>" style="width:450px;" value="<%= logo.content %>" placeholder="<%= logo.info %>"></td>
			<td class="board_tbody" width="150px"><center><input class="save" id="<%= logo.id %>" type="button" value="저장"></center></td>
        </tr>
		<%end %>
    </tbody>
</table>

<br><br>
<div id="feature_wrapper">
	<p1>기본정보</p1>
	<br>
</div>

<table class="board_table">
    <thead class="basic_info">
        <tr>
            <th class="board_thead" width="150px"><center>구분</center></th>
            <td class="board_thead" width="500px"><center>내용</center></td>
			<td class="board_thead" width="150px"><center><input type="button" class="save_all" value="기본정보 저장"></center></td>
        </tr>
    </thead>
 
    <tbody class="basic_info">
        <%
		@basicinfos.each do |info|
		%>
		<tr>
            <td class="board_tbody" width="150px"><%= info.name %></td>
            <td class="board_tbody" width="500px"><input type="text" class="val" id="basic_info_<%= info.id %>" style="width:450px;" value="<%= info.content %>" placeholder="<%= info.info %>"></td>
			<td class="board_tbody" width="150px"><center><input class="save" id="<%= info.id %>" type="button" value="저장"></center></td>
        </tr>
		<%end %>
    </tbody>
</table>


<br><br>
<div id="feature_wrapper">
	<p1>약관/개인정보관리책임자</p1>
	<br>
</div>

<table class="board_table">
    <thead class="agreement">
        <tr>
            <th class="board_thead" width="150px"><center>구분</center></th>
            <td class="board_thead" width="500px"><center>내용</center></td>
			<td class="board_thead" width="150px"><center><input type="button" class="save_all" value="약관/개인정보관리책임자 저장"></center></td>
        </tr>
    </thead>
 
    <tbody class="agreement">
        <%
		@agreements.each do |agree|
		%>
		<tr>
            <td class="board_tbody" width="150px"><%= agree.name %></td>
            <td class="board_tbody" width="500px"><input type="text" class="val" id="agreement_<%= agree.id %>" style="width:450px;" value="<%= agree.content %>" placeholder="<%= agree.info %>"></td>
			<td class="board_tbody" width="150px"><center><input class="save" id="<%= agree.id %>" type="button" value="저장"></center></td>
        </tr>
		<%end %>
    </tbody>
</table>


<br><br>

<div id="feature_wrapper">
	<p1>결제 설정</p1>
	<br>
</div>

<table class="board_table">
    <thead class="payment">
        <tr>
            <th class="board_thead" width="150px"><center>구분</center></th>
            <td class="board_thead" width="500px"><center>내용</center></td>
			<td class="board_thead" width="150px"><center><input type="button" class="save_all" value="결제설정 저장"></center></td>
        </tr>
    </thead>
 
    <tbody class="payment">
        <%
		@payments.each do |pay|
		%>
		<tr>
            <td class="board_tbody" width="150px"><%= pay.name %></td>
            <td class="board_tbody" width="500px"><input type="text" class="val" id="payment_<%= pay.id %>" style="width:450px;" value="<%= pay.content %>" placeholder="<%= pay.info %>"></td>
			<td class="board_tbody" width="150px"><center><input class="save" id="<%= pay.id %>" type="button" value="저장"></center></td>
        </tr>
		<%end %>
    </tbody>
</table>

<br><br>
<br><br>

<script language="Javascript">
$('.save').live("click",function(event){
	$category = $(this).parents('tbody').attr("class");
	$id = $(this).attr("id");
	$content = $('#'+$category+'_'+$id).val();
	
	if ($content == ""){
		alert("내용을 입력해 주세요!");
		$('#'+$category+'_'+$code).focus();
		return false;
	}else{
		$.ajax({
			data:'content='+$content+'&id='+$id, 
			dataType:'script', 
			type:'post', 
			url:'/admin/admininfos/save_admininfo',
			success: function(request){
				alert("저장이 완료되었습니다!");
			}
		});
	}
})

$('.save_all').click(function(){
	$category = $(this).parents('thead').attr("class");
	$ids = "";
	$contents = "";
	$('tbody.'+$category+' input.val').each(function(){
		$id = $(this).attr("id").replace($category + "_","");
		$ids += $id + ","
		$contents += $('#'+$category+'_'+$id).val() + "$$";
	})
	
	$.ajax({
		data:'category='+$category+'&contents='+$contents+'&ids='+$ids, 
		dataType:'script', 
		type:'post', 
		url:'/admin/admininfos/save_admininfos',
		success: function(request){
			alert("저장이 완료되었습니다!");
		}
	});
})
</script>