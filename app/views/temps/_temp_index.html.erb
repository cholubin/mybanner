<div id="design" class="content-layout">
	<h3>제품/디자인보기</h3>
	<p class="content-description">왼쪽 카테고리를 이용하여 마음에드는 제품과 디자인을 선택하세요. 또한 차세대 편집 솔루션 Web Top을 이용하여 전문지식 없어도 내용을 직접 편집하고, 그대로 인쇄 주문이 가능합니다.</p>
	<div id="design-list" class="<%=(@subcategory_name != nil) ? "vertical" : "horizon" %>">
		<h4><%=params[:category_name] != nil ? Category.get(params[:category_name].to_i).name : "전체"  %><%= "(" + Subcategory.get(params[:subcategory_name].to_i).name + ")" if @subcategory_name != nil %> 디자인 목록</h4>
		<!-- 디자인 목록 반복 시작 -->
		<ul id="template-type">
			<li class="horizon"><a href="### 가로 디자인 보기 ###">가로 디자인 보기 </a></li>
			<li class="vertical"><a href="### 세로 디자인 보기 ###">세로 디자인 보기</a></li>
		</ul>
<%
@temps.each do |my|
	temp_image_path = my.thumb_url  if my.thumb_url
	puts_message temp_image_path %>
		<div class="article">
		<a class="preview"><%= "<img src='" + temp_image_path + "'>" if my.thumb_url %></a>
		<ul>
			<li class="designcode"><%= my.name %></li>
			<li class="item"><span>품목 :</span> <%=my.category%><%= "(" + my.subcategory + ") " if my.subcategory != nil %></li>
			<li class="size"><span>사이즈 :</span> <%= my.size %></li>
			<li class="price"><span>가격 :</span> <%=my.price%></li>
			<% if signed_in? %>
			<li class="self-edit"><%= link_to "직접편집하기", '/mytemplates?temp_id='+my.id.to_s+'&edit=y', :confirm => '디자인바구니에 담으며 바로 편집하시겠습니까?',  :method => :post %></li>
			<li class="order-edit"><a href="/pages/editorder" class="ajax-edit-order">편집의뢰하기</a></li>
			<%else %>
			<li class="self-edit"><a href="/login" class="ajax-sign-in">직접편집하기</a></li>
			<li class="order-edit"><a href="/login" class="ajax-sign-in">편집의뢰하기</a></li>
			<%end %>
		</ul>
		</div>
<% end %>
		<!-- 디자인 반복 끝-->
	</div>
<% if @temps.count > 0 %>
	<div id="order-list-page">
		<h4>페이지 네비게이션</h4>			
		<%
		if params[:category_name] != nil
			@category_name = params[:category_name]
		end
		if params[:subcategory_name] != nil
	    	@subcategory_name = params[:subcategory_name]
		end
	
			if signed_in?
		    if @category_name != nil and @subcategory_name != nil%>
		      <%= Temp.all(:category => @category_name, :subcategory => @subcategory_name).isopen(current_user.userid).search(params[:search], params[:page]).pager.to_html "/temps?category_name=#{@category_name}&subcategory_name=#{@subcategory_name}&search=#{params[:search]}" %>
		    <% elsif @category_name != nil %>
		      <%= Temp.all(:category => @category_name).isopen(current_user.userid).search(params[:search], params[:page]).pager.to_html "/temps?category_name=#{@category_name}&search=#{params[:search]}" %>      
		    <% elsif  @subcategory_name != nil %>
		      <%= Temp.all(:subcategory => @subcategory_name).isopen(current_user.userid).search(params[:search], params[:page]).pager.to_html "/temps?subcategory_name=#{@subcategory_name}&search=#{params[:search]}" %>      
		    <%else %>
		      <%= Temp.all().isopen(current_user.userid).search(params[:search], params[:page]).pager.to_html "/temps?search=#{params[:search]}" %>      
		    <% end 
		end%>		
	</div>
	<% form_tag request.path + "?page=#{params[:page]}", :method => 'get' do %>
	<fieldset>
		<legend>디자인 검색</legend>
		<p><label for="search">디자인 코드</label><%= text_field_tag :search, params[:search] %><%= submit_tag("검색") %></p>
	</fieldset>
	<% end %>
<% end %>
</div>